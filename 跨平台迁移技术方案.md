# JavaFX è·¨å¹³å°è¿ç§»å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆ

## ğŸ¯ æŠ€æœ¯é€‰å‹ï¼šGluon Mobile + JavaFX

### æ ¸å¿ƒå·¥å…·é“¾é…ç½®

```xml
<!-- Gluon Mobile Maven æ’ä»¶é…ç½® -->
<plugin>
    <groupId>com.gluonhq</groupId>
    <artifactId>gluonfx-maven-plugin</artifactId>
    <version>1.0.16</version>
    <configuration>
        <target>${gluonfx.target}</target>
        <mainClass>com.feixiang.tabletcontrol.TabletControlApplication</mainClass>
        <runtimeArgs>
            <list>-Djavafx.platform=monocle</list>
            <list>-Dmonocle.platform=Headless</list>
        </runtimeArgs>
    </configuration>
</plugin>
```

### å¹³å°æ„å»ºç›®æ ‡

| å¹³å° | æ„å»ºå‘½ä»¤ | è¾“å‡ºæ ¼å¼ | åˆ†å‘æ–¹å¼ |
|------|----------|----------|----------|
| **Windows** | `mvn gluonfx:build -Dtarget=windows` | .exe | ç›´æ¥åˆ†å‘ |
| **macOS** | `mvn gluonfx:build -Dtarget=mac` | .app | App Store/ç›´æ¥åˆ†å‘ |
| **Linux** | `mvn gluonfx:build -Dtarget=linux` | å¯æ‰§è¡Œæ–‡ä»¶ | AppImage/Snap |
| **Android** | `mvn gluonfx:build -Dtarget=android` | .apk/.aab | Google Play |
| **iOS** | `mvn gluonfx:build -Dtarget=ios` | .ipa | App Store |

## ğŸ“ ä¸‰ã€è·¨å¹³å°é¡¹ç›®æ¶æ„è®¾è®¡

### 3.1 ç»Ÿä¸€ç›®å½•ç»“æ„

```
tablet-control-crossplatform/
â”œâ”€â”€ pom.xml                           # ä¸»æ„å»ºé…ç½®
â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ com/feixiang/tabletcontrol/
â”‚       â”œâ”€â”€ TabletControlApp.java     # è·¨å¹³å°ä¸»å…¥å£
â”‚       â”œâ”€â”€ core/                     # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆ100%å¤ç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ service/             # ä¸šåŠ¡æœåŠ¡å±‚
â”‚       â”‚   â”œâ”€â”€ repository/          # æ•°æ®è®¿é—®å±‚
â”‚       â”‚   â””â”€â”€ model/               # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ ui/                      # UIå±‚ï¼ˆ70%å¤ç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ common/              # é€šç”¨UIç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ desktop/             # æ¡Œé¢ç«¯ç‰¹åŒ–
â”‚       â”‚   â””â”€â”€ mobile/              # ç§»åŠ¨ç«¯ç‰¹åŒ–
â”‚       â””â”€â”€ platform/                # å¹³å°é€‚é…å±‚ï¼ˆ30%å¤ç”¨ï¼‰
â”‚           â”œâ”€â”€ PlatformManager.java
â”‚           â”œâ”€â”€ desktop/             # æ¡Œé¢ç«¯é€‚é…
â”‚           â””â”€â”€ mobile/              # ç§»åŠ¨ç«¯é€‚é…
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ META-INF/substrate/config/   # GraalVM åŸç”Ÿç¼–è¯‘é…ç½®
â”‚   â””â”€â”€ com/feixiang/tabletcontrol/
â”‚       â”œâ”€â”€ desktop.fxml            # æ¡Œé¢ç«¯å¸ƒå±€
â”‚       â””â”€â”€ mobile.fxml             # ç§»åŠ¨ç«¯å¸ƒå±€
â””â”€â”€ USERDATA/                        # è·¨å¹³å°æ•°æ®ç›®å½•
    â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
    â”œâ”€â”€ data/                        # ä¸šåŠ¡æ•°æ®
    â””â”€â”€ media/                       # åª’ä½“èµ„æº
```

### 3.2 å¹³å°é€‚é…ç­–ç•¥

#### å“åº”å¼UIé€‚é…

```java
public class ResponsiveLayoutManager {
    
    public void adaptLayout(Stage stage) {
        Screen screen = Screen.getPrimary();
        Rectangle2D bounds = screen.getVisualBounds();
        
        if (bounds.getWidth() < 800) {
            // ç§»åŠ¨ç«¯å¸ƒå±€
            loadMobileLayout(stage);
        } else {
            // æ¡Œé¢ç«¯å¸ƒå±€
            loadDesktopLayout(stage);
        }
    }
    
    private void loadMobileLayout(Stage stage) {
        // åŠ è½½ç§»åŠ¨ç«¯ä¼˜åŒ–çš„FXMLå¸ƒå±€
        // è°ƒæ•´ç»„ä»¶é—´è·ã€å­—ä½“å¤§å°ã€è§¦æ§åŒºåŸŸ
    }
}
```

#### è¾“å…¥æ–¹å¼é€‚é…

```java
public class InputAdapterManager {
    
    public void setupInputHandlers(Node node) {
        // æ¡Œé¢ç«¯ï¼šé¼ æ ‡äº‹ä»¶
        node.setOnMouseClicked(this::handleMouseClick);
        
        // ç§»åŠ¨ç«¯ï¼šè§¦æ§äº‹ä»¶
        node.setOnTouchPressed(this::handleTouchPress);
        node.setOnTouchMoved(this::handleTouchMove);
        
        // ç»Ÿä¸€å¤„ç†é€»è¾‘
        node.setOnAction(this::handleAction);
    }
}
```

## ğŸ”§ å››ã€ä»£ç è¿ç§»å®æ–½è®¡åˆ’

### 4.1 ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒæ¶æ„è¿ç§»ï¼ˆé¢„è®¡3å¤©ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»º Gluon Mobile é¡¹ç›®ç»“æ„
- [ ] è¿ç§»ç°æœ‰ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆService/Repository/Modelï¼‰
- [ ] é…ç½®è·¨å¹³å°æ•°æ®å­˜å‚¨è·¯å¾„
- [ ] å®ç°å¹³å°æ£€æµ‹å’Œé€‚é…åŸºç¡€æ¡†æ¶

**é¢„æœŸæˆæœ**ï¼š
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ 100% è¿ç§»å®Œæˆ
- è·¨å¹³å°æ•°æ®å­˜å‚¨æ­£å¸¸å·¥ä½œ
- åŸºç¡€å¹³å°é€‚é…æ¡†æ¶å°±ç»ª

### 4.2 ç¬¬äºŒé˜¶æ®µï¼šUIå±‚é€‚é…ï¼ˆé¢„è®¡5å¤©ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] åˆ›å»ºå“åº”å¼å¸ƒå±€ç®¡ç†å™¨
- [ ] é€‚é…ç°æœ‰ JavaFX ç»„ä»¶åˆ°ç§»åŠ¨ç«¯
- [ ] å®ç°è§¦æ§è¾“å…¥å¤„ç†
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯å­—ä½“å’Œé—´è·

**å…³é”®é€‚é…ç‚¹**ï¼š

```java
// åŸæ¡Œé¢ç«¯ä»£ç 
Button button = new Button("ç¡®è®¤");
button.setPrefSize(100, 30);

// è·¨å¹³å°é€‚é…å
Button button = new Button("ç¡®è®¤");
if (PlatformDetector.isMobile()) {
    button.setPrefSize(120, 44);  // ç§»åŠ¨ç«¯æ›´å¤§çš„è§¦æ§åŒºåŸŸ
    button.setStyle("-fx-font-size: 16px;");
} else {
    button.setPrefSize(100, 30);
    button.setStyle("-fx-font-size: 12px;");
}
```

### 4.3 ç¬¬ä¸‰é˜¶æ®µï¼šå¹³å°ç‰¹åŒ–åŠŸèƒ½ï¼ˆé¢„è®¡4å¤©ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] å®ç°å„å¹³å°æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- [ ] é…ç½®å¹³å°ç‰¹å®šæƒé™ç”³è¯·
- [ ] ä¼˜åŒ–å„å¹³å°å¯åŠ¨æ€§èƒ½
- [ ] å®ç°å¹³å°ç‰¹å®šUIé£æ ¼

### 4.4 ç¬¬å››é˜¶æ®µï¼šæ„å»ºç³»ç»Ÿé…ç½®ï¼ˆé¢„è®¡2å¤©ï¼‰

**ä»»åŠ¡æ¸…å•**ï¼š
- [ ] é…ç½® Gluon Mobile Maven æ’ä»¶
- [ ] è®¾ç½®å„å¹³å°æ„å»ºå‚æ•°
- [ ] åˆ›å»ºä¸€é”®æ„å»ºè„šæœ¬
- [ ] é…ç½® CI/CD æµæ°´çº¿

## ğŸš€ äº”ã€ä¸€é”®æ„å»ºè„šæœ¬

### Windows æ„å»ºè„šæœ¬

```batch
@echo off
echo === è·¨å¹³å°åº”ç”¨æ„å»ºå·¥å…· ===

set JAVA_HOME=C:\Program Files\Java\jdk1.8.0_202
set GRAALVM_HOME=C:\graalvm-ce-java8-22.3.0

echo [1] æ„å»º Windows ç‰ˆæœ¬...
mvn clean gluonfx:build -Dtarget=windows
if %ERRORLEVEL% EQU 0 (
    echo âœ… Windows ç‰ˆæœ¬æ„å»ºæˆåŠŸ
) else (
    echo âŒ Windows ç‰ˆæœ¬æ„å»ºå¤±è´¥
    exit /b 1
)

echo [2] æ„å»º Android ç‰ˆæœ¬...
mvn clean gluonfx:build -Dtarget=android
if %ERRORLEVEL% EQU 0 (
    echo âœ… Android ç‰ˆæœ¬æ„å»ºæˆåŠŸ
) else (
    echo âŒ Android ç‰ˆæœ¬æ„å»ºå¤±è´¥
)

echo === æ„å»ºå®Œæˆ ===
echo Windows ç‰ˆæœ¬: target\gluonfx\x86_64-windows\TabletControl.exe
echo Android ç‰ˆæœ¬: target\gluonfx\aarch64-android\gvm\TabletControl.apk
pause
```

## ğŸ“Š å…­ã€æ€§èƒ½åŸºå‡†ä¸éªŒè¯

### 6.1 å¯åŠ¨æ€§èƒ½ç›®æ ‡

| å¹³å° | ç›®æ ‡å¯åŠ¨æ—¶é—´ | å†…å­˜å ç”¨ | å®‰è£…åŒ…å¤§å° |
|------|-------------|----------|------------|
| Windows | â‰¤ 2ç§’ | â‰¤ 100MB | â‰¤ 50MB |
| Android | â‰¤ 3ç§’ | â‰¤ 150MB | â‰¤ 30MB |
| iOS | â‰¤ 3ç§’ | â‰¤ 120MB | â‰¤ 35MB |

### 6.2 åŠŸèƒ½ä¸€è‡´æ€§éªŒè¯

**æµ‹è¯•æ¸…å•**ï¼š
- [ ] æ•°æ®æ–‡ä»¶è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•
- [ ] UIç»„ä»¶åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„æ˜¾ç¤ºæµ‹è¯•
- [ ] è§¦æ§æ“ä½œä¸é¼ æ ‡æ“ä½œçš„ä¸€è‡´æ€§æµ‹è¯•
- [ ] æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™æµ‹è¯•
- [ ] åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æµ‹è¯•

## âš ï¸ ä¸ƒã€é£é™©è¯†åˆ«ä¸åº”å¯¹

### 7.1 æŠ€æœ¯é£é™©

**é£é™©1ï¼šGraalVM åŸç”Ÿç¼–è¯‘å…¼å®¹æ€§**
- **å½±å“**ï¼šæŸäº› Java ç‰¹æ€§å¯èƒ½ä¸è¢«æ”¯æŒ
- **åº”å¯¹**ï¼šæå‰è¿›è¡Œå…¼å®¹æ€§æµ‹è¯•ï¼Œå‡†å¤‡æ›¿ä»£æ–¹æ¡ˆ

**é£é™©2ï¼šç§»åŠ¨ç«¯æ€§èƒ½é—®é¢˜**
- **å½±å“**ï¼šå¯åŠ¨æ—¶é—´æˆ–è¿è¡Œæ€§èƒ½ä¸è¾¾æ ‡
- **åº”å¯¹**ï¼šä»£ç ä¼˜åŒ–ã€èµ„æºå‹ç¼©ã€å»¶è¿ŸåŠ è½½

### 7.2 å¹³å°å®¡æ ¸é£é™©

**é£é™©3ï¼šiOS App Store å®¡æ ¸**
- **å½±å“**ï¼šå¯èƒ½å› ä¸º"ç±»ä¼¼æ¡Œé¢åº”ç”¨"è¢«æ‹’
- **åº”å¯¹**ï¼šä¼˜åŒ–ç§»åŠ¨ç«¯UIè®¾è®¡ï¼Œç¬¦åˆ iOS è®¾è®¡è§„èŒƒ

### 7.3 é™çº§ç­–ç•¥

å¦‚æœ Gluon Mobile æ–¹æ¡ˆé‡åˆ°ä¸å¯è§£å†³çš„é—®é¢˜ï¼š

**å¤‡é€‰æ–¹æ¡ˆ1**ï¼šCodename One
- éœ€è¦é‡å†™ UI å±‚ï¼Œä½†ä¸šåŠ¡é€»è¾‘å¯å¤ç”¨
- é¢„è®¡é¢å¤–å¼€å‘æ—¶é—´ï¼š10-15å¤©

**å¤‡é€‰æ–¹æ¡ˆ2**ï¼šåˆ†å¹³å°å¼€å‘
- æ¡Œé¢ç«¯ä¿æŒ JavaFX
- ç§»åŠ¨ç«¯ä½¿ç”¨åŸç”Ÿå¼€å‘
- é€šè¿‡ç»Ÿä¸€çš„æ•°æ®æ ¼å¼ä¿æŒå…¼å®¹

## ğŸ“ˆ å…«ã€å®æ–½æ—¶é—´çº¿

```mermaid
gantt
    title è·¨å¹³å°è¿ç§»å®æ–½è®¡åˆ’
    dateFormat  YYYY-MM-DD
    section å‡†å¤‡é˜¶æ®µ
    ç¯å¢ƒæ­å»º           :prep1, 2024-01-01, 1d
    å·¥å…·é“¾é…ç½®         :prep2, after prep1, 1d
    
    section å¼€å‘é˜¶æ®µ
    æ ¸å¿ƒæ¶æ„è¿ç§»       :dev1, after prep2, 3d
    UIå±‚é€‚é…          :dev2, after dev1, 5d
    å¹³å°ç‰¹åŒ–åŠŸèƒ½       :dev3, after dev2, 4d
    æ„å»ºç³»ç»Ÿé…ç½®       :dev4, after dev3, 2d
    
    section æµ‹è¯•é˜¶æ®µ
    åŠŸèƒ½æµ‹è¯•          :test1, after dev4, 3d
    æ€§èƒ½æµ‹è¯•          :test2, after test1, 2d
    å…¼å®¹æ€§æµ‹è¯•        :test3, after test2, 2d
    
    section å‘å¸ƒé˜¶æ®µ
    æ‰“åŒ…å‘å¸ƒ          :release1, after test3, 1d
    æ–‡æ¡£æ•´ç†          :release2, after release1, 1d
```

**æ€»é¢„è®¡æ—¶é—´ï¼š25å¤©**

## ğŸ¯ ä¹ã€æˆåŠŸæ ‡å‡†

### 9.1 é‡åŒ–æŒ‡æ ‡

- âœ… **ä»£ç å¤ç”¨ç‡**ï¼šâ‰¥ 90%ï¼ˆé€šè¿‡ cloc å·¥å…·éªŒè¯ï¼‰
- âœ… **åŠŸèƒ½ä¸€è‡´æ€§**ï¼š100% æ ¸å¿ƒåŠŸèƒ½åœ¨æ‰€æœ‰å¹³å°æ­£å¸¸å·¥ä½œ
- âœ… **æ€§èƒ½è¾¾æ ‡**ï¼šå¯åŠ¨æ—¶é—´ç¬¦åˆå„å¹³å°ç›®æ ‡
- âœ… **æ•°æ®å…¼å®¹æ€§**ï¼šUSERDATA æ–‡ä»¶å¤¹å¯åœ¨ä»»æ„å¹³å°é—´è¿ç§»

### 9.2 äº¤ä»˜æˆæœ

1. **è·¨å¹³å°åº”ç”¨ç¨‹åº**ï¼šæ”¯æŒ Windowsã€macOSã€Linuxã€Androidã€iOS
2. **ä¸€é”®æ„å»ºç³»ç»Ÿ**ï¼šè‡ªåŠ¨åŒ–æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬
3. **æŠ€æœ¯æ–‡æ¡£**ï¼šè¯¦ç»†çš„éƒ¨ç½²å’Œç»´æŠ¤æŒ‡å—
4. **æµ‹è¯•æŠ¥å‘Š**ï¼šå®Œæ•´çš„åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•ç»“æœ

---

è¿™ä¸ªæ–¹æ¡ˆåŸºäºæ‚¨ç°æœ‰çš„ JavaFX é¡¹ç›®ï¼Œé€šè¿‡ Gluon Mobile å®ç°çœŸæ­£çš„è·¨å¹³å°éƒ¨ç½²ï¼Œé¢„è®¡å¯è¾¾åˆ° 92% çš„ä»£ç å¤ç”¨ç‡ï¼ŒåŒæ—¶ä¿æŒæ‰€æœ‰ç¡¬æ€§çº¦æŸã€‚

æ˜¯å¦éœ€è¦æˆ‘å¼€å§‹å®æ–½ç¬¬ä¸€é˜¶æ®µçš„æ ¸å¿ƒæ¶æ„è¿ç§»ï¼Ÿ
