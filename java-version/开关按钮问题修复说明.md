# å¼€å…³æŒ‰é’®é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜1ï¼šå‘é€æŒ‡ä»¤å†…å®¹é”™è¯¯
**ç°è±¡**ï¼š
- ä¿å­˜çš„æ•°æ®ï¼š`"00 01 00 00 00 06 01 06 00 01 00 01"`ï¼ˆå®Œæ•´çš„åå…­è¿›åˆ¶æŒ‡ä»¤ï¼‰
- å®é™…å‘é€ï¼š`01`ï¼ˆåªæœ‰1å­—èŠ‚ï¼‰

**åŸå› **ï¼š
åœ¨ `getSwitchButtonData` æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†ç¡¬ç¼–ç çš„é»˜è®¤æŒ‡ä»¤ï¼š
```java
switchData.setOffCommand("å¼€å¯æŒ‡ä»¤|TCP|127.0.0.1|8080|00");
switchData.setOnCommand("å…³é—­æŒ‡ä»¤|TCP|127.0.0.1|8080|01");
```

### é—®é¢˜2ï¼šæŒ‰é’®æ ·å¼æ²¡æœ‰æ›´æ–°
**ç°è±¡**ï¼š
- æ—¥å¿—æ˜¾ç¤ºï¼š`å¼€å…³æŒ‰é’®å›¾ç‰‡å·²æ›´æ–°: USERDATA/appearance/button/button1/btn2.png`
- å®é™…ç•Œé¢ï¼šæŒ‰é’®æ ·å¼æ²¡æœ‰å˜åŒ–

**åŸå› **ï¼š
UIæ›´æ–°é€»è¾‘å­˜åœ¨ï¼Œä½†å¯èƒ½å­˜åœ¨å›¾ç‰‡åŠ è½½æˆ–åˆ·æ–°é—®é¢˜ã€‚

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1ï¼šæ­£ç¡®åŠ è½½æŒ‡ä»¤æ•°æ®

#### ä¿®æ”¹å‰ï¼š
```java
// è®¾ç½®é»˜è®¤æŒ‡ä»¤ï¼ˆå¦‚æœæ²¡æœ‰é…ç½®ï¼Œä½¿ç”¨ç©ºæŒ‡ä»¤ï¼‰
switchData.setOffCommand("å¼€å¯æŒ‡ä»¤|TCP|127.0.0.1|8080|00");
switchData.setOnCommand("å…³é—­æŒ‡ä»¤|TCP|127.0.0.1|8080|01");
```

#### ä¿®æ”¹åï¼š
```java
// ä»commandså±æ€§ä¸­åŠ è½½æŒ‡ä»¤æ•°æ®
Object commands = instance.getClientProperty("commands");
if (commands instanceof java.util.List) {
    @SuppressWarnings("unchecked")
    java.util.List<String> commandList = (java.util.List<String>) commands;
    
    // å¦‚æœæœ‰ä¸¤æ¡æŒ‡ä»¤ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºå…³çŠ¶æ€å’Œå¼€çŠ¶æ€æŒ‡ä»¤
    if (commandList.size() >= 2) {
        switchData.setOffCommand(commandList.get(0)); // ç¬¬ä¸€æ¡ä¸ºå…³çŠ¶æ€æŒ‡ä»¤
        switchData.setOnCommand(commandList.get(1));  // ç¬¬äºŒæ¡ä¸ºå¼€çŠ¶æ€æŒ‡ä»¤
        System.out.println("ä»commandsåŠ è½½æŒ‡ä»¤:");
        System.out.println("å…³çŠ¶æ€æŒ‡ä»¤: " + switchData.getOffCommand());
        System.out.println("å¼€çŠ¶æ€æŒ‡ä»¤: " + switchData.getOnCommand());
    } else {
        // è®¾ç½®é»˜è®¤æŒ‡ä»¤
        switchData.setOffCommand("å…³çŠ¶æ€æŒ‡ä»¤|TCP|127.0.0.1|8080|00");
        switchData.setOnCommand("å¼€çŠ¶æ€æŒ‡ä»¤|TCP|127.0.0.1|8080|01");
        System.out.println("ä½¿ç”¨é»˜è®¤æŒ‡ä»¤é…ç½®");
    }
} else {
    // è®¾ç½®é»˜è®¤æŒ‡ä»¤
    switchData.setOffCommand("å…³çŠ¶æ€æŒ‡ä»¤|TCP|127.0.0.1|8080|00");
    switchData.setOnCommand("å¼€çŠ¶æ€æŒ‡ä»¤|TCP|127.0.0.1|8080|01");
    System.out.println("commandså±æ€§ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤æŒ‡ä»¤é…ç½®");
}
```

### ä¿®å¤2ï¼šå¢å¼ºUIæ›´æ–°è°ƒè¯•

#### æ·»åŠ è¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼š
```java
private void updateSwitchButtonUI(JPanel instance, SwitchButtonData switchData) {
    try {
        // è·å–å½“å‰åº”è¯¥æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„
        String currentImagePath = switchData.getCurrentImagePath();
        System.out.println("è°ƒè¯•ï¼šå½“å‰çŠ¶æ€=" + switchData.getCurrentState() + ", åº”æ˜¾ç¤ºå›¾ç‰‡=" + currentImagePath);

        // æŸ¥æ‰¾å®ä¾‹ä¸­çš„JLabelç»„ä»¶
        Component[] components = instance.getComponents();
        System.out.println("è°ƒè¯•ï¼šå®ä¾‹ä¸­ç»„ä»¶æ•°é‡=" + components.length);
        for (Component comp : components) {
            if (comp instanceof JLabel) {
                JLabel label = (JLabel) comp;
                System.out.println("è°ƒè¯•ï¼šæ‰¾åˆ°JLabelç»„ä»¶ï¼Œå½“å‰å›¾æ ‡=" + (label.getIcon() != null ? "æœ‰å›¾æ ‡" : "æ— å›¾æ ‡"));
                // ... å›¾ç‰‡æ›´æ–°é€»è¾‘
            }
        }
    } catch (Exception e) {
        System.out.println("âœ— æ›´æ–°å¼€å…³æŒ‰é’®UIå¤±è´¥: " + e.getMessage());
    }
}
```

---

## ğŸ“Š æ•°æ®æµç¨‹åˆ†æ

### æ­£ç¡®çš„æ•°æ®æµç¨‹ï¼š

1. **æ•°æ®ä¿å­˜**ï¼ˆJSONæ ¼å¼ï¼‰ï¼š
```json
"commands": [
  {
    "name": "å¼€å¯æŒ‡ä»¤",
    "protocol": "TCP", 
    "ip": "127.0.0.1",
    "port": "8080",
    "command": "00 01 00 00 00 06 01 06 00 01 00 01"
  },
  {
    "name": "å…³é—­æŒ‡ä»¤",
    "protocol": "TCP",
    "ip": "127.0.0.1", 
    "port": "8080",
    "command": "00 01 00 00 00 06 01 06 00 01 00 00"
  }
]
```

2. **æ•°æ®åŠ è½½**ï¼ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼ï¼‰ï¼š
```java
String commandData = String.format("%s|%s|%s|%s|%s", name, protocol, ip, port, command);
// ç»“æœï¼šå¼€å¯æŒ‡ä»¤|TCP|127.0.0.1|8080|00 01 00 00 00 06 01 06 00 01 00 01
```

3. **å¼€å…³æŒ‰é’®ä½¿ç”¨**ï¼š
```java
switchData.setOffCommand(commandList.get(0)); // å…³çŠ¶æ€æŒ‡ä»¤
switchData.setOnCommand(commandList.get(1));  // å¼€çŠ¶æ€æŒ‡ä»¤
```

4. **æŒ‡ä»¤å‘é€**ï¼š
```java
String commandToSend = switchData.getNextCommand();
// å½“å‰çŠ¶æ€ä¸ºå…³æ—¶ï¼Œå‘é€å¼€æŒ‡ä»¤
// å½“å‰çŠ¶æ€ä¸ºå¼€æ—¶ï¼Œå‘é€å…³æŒ‡ä»¤
```

---

## ğŸ¯ é¢„æœŸä¿®å¤æ•ˆæœ

### ä¿®å¤åçš„é¢„æœŸæ—¥å¿—ï¼š

#### æŒ‡ä»¤æ•°æ®åŠ è½½ï¼š
```
ä»commandsåŠ è½½æŒ‡ä»¤:
å…³çŠ¶æ€æŒ‡ä»¤: å¼€å¯æŒ‡ä»¤|TCP|127.0.0.1|8080|00 01 00 00 00 06 01 06 00 01 00 01
å¼€çŠ¶æ€æŒ‡ä»¤: å…³é—­æŒ‡ä»¤|TCP|127.0.0.1|8080|00 01 00 00 00 06 01 06 00 01 00 00
```

#### æŒ‡ä»¤å‘é€ï¼š
```
æ‰§è¡Œå¼€å…³æŒ‰é’®
å½“å‰çŠ¶æ€: å…³
å‘é€æŒ‡ä»¤: å¼€å¯æŒ‡ä»¤|TCP|127.0.0.1|8080|00 01 00 00 00 06 01 06 00 01 00 01
â†’ å‘é€æŒ‡ä»¤: å¼€å¯æŒ‡ä»¤ [TCP 127.0.0.1:8080] æ•°æ®é•¿åº¦: 12 å­—èŠ‚
  åå…­è¿›åˆ¶æ•°æ®: 00 01 00 00 00 06 01 06 00 01 00 01
  âœ“ TCPæ•°æ®å‘é€å®Œæˆï¼Œå·²å‘é€ 12 å­—èŠ‚
```

#### UIæ›´æ–°ï¼š
```
è°ƒè¯•ï¼šå½“å‰çŠ¶æ€=true, åº”æ˜¾ç¤ºå›¾ç‰‡=USERDATA/appearance/button/button1/btn2.png
è°ƒè¯•ï¼šå®ä¾‹ä¸­ç»„ä»¶æ•°é‡=1
è°ƒè¯•ï¼šæ‰¾åˆ°JLabelç»„ä»¶ï¼Œå½“å‰å›¾æ ‡=æœ‰å›¾æ ‡
âœ“ å¼€å…³æŒ‰é’®å›¾ç‰‡å·²æ›´æ–°: USERDATA/appearance/button/button1/btn2.png
âœ“ å¼€å…³æŒ‰é’®çŠ¶æ€å·²åˆ‡æ¢ä¸º: å¼€
```

---

## âœ… éªŒè¯æ­¥éª¤

1. **é‡æ–°å¯åŠ¨ç¨‹åº**
2. **ç‚¹å‡»å¼€å…³æŒ‰é’®**
3. **æ£€æŸ¥æ§åˆ¶å°è¾“å‡º**ï¼š
   - ç¡®è®¤æŒ‡ä»¤æ•°æ®æ­£ç¡®åŠ è½½
   - ç¡®è®¤å‘é€çš„æ˜¯å®Œæ•´çš„åå…­è¿›åˆ¶æ•°æ®
   - ç¡®è®¤UIæ›´æ–°è°ƒè¯•ä¿¡æ¯
4. **æ£€æŸ¥ç•Œé¢å˜åŒ–**ï¼š
   - æŒ‰é’®æ ·å¼åº”è¯¥ä» btn1.png åˆ‡æ¢åˆ° btn2.png

---

## ğŸ” æ•…éšœæ’é™¤

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. **æ£€æŸ¥æ–‡ä»¶è·¯å¾„**ï¼šç¡®è®¤ btn1.png å’Œ btn2.png æ–‡ä»¶å­˜åœ¨
2. **æ£€æŸ¥æƒé™**ï¼šç¡®è®¤ç¨‹åºæœ‰è¯»å–å›¾ç‰‡æ–‡ä»¶çš„æƒé™
3. **æ£€æŸ¥æ•°æ®æ ¼å¼**ï¼šç¡®è®¤ project_data.json ä¸­çš„æ•°æ®æ ¼å¼æ­£ç¡®
4. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**ï¼šå…³æ³¨æ‰€æœ‰è°ƒè¯•è¾“å‡ºä¿¡æ¯

ä¿®å¤å®Œæˆåï¼Œå¼€å…³æŒ‰é’®åº”è¯¥èƒ½å¤Ÿï¼š
- âœ… å‘é€å®Œæ•´çš„åå…­è¿›åˆ¶æŒ‡ä»¤æ•°æ®
- âœ… æ­£ç¡®åˆ‡æ¢æŒ‰é’®æ ·å¼ï¼ˆbtn1.png â†” btn2.pngï¼‰
- âœ… æä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
