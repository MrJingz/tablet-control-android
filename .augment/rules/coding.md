---
type: "always_apply"
---

---
type: "always_apply"---
核心指令：功能需求实现规范流程
一、前置确认步骤
在启动任何功能需求实现前，需先执行以下操作：
完整读取用户提供的所有功能需求描述，若包含相关代码片段需逐行分析逻辑与关联模块
向用户确认：“已接收所有需求，是否需补充需求细节（如优先级、兼容性约束等）？确认后将创建任务计划”
二、执行步骤（强制遵循）
需求与代码分析：
拆解需求中的功能点，标记与现有系统的关联模块（如涉及的代码文件、工具函数）
识别需求中的复杂项（如跨模块交互、新逻辑开发），明确需拆分的子任务边界
任务列表创建：
使用add_tasks工具创建任务列表，格式需包含：
主任务：[功能需求名称，如 “用户登录模块优化”]
子任务：[序号 + 可执行动作 + 关联资源，如 “1. 分析现有 login.js 中验证逻辑（复用路径：/src/utils/auth.js）”]
优先级：标注子任务优先级（高 / 中 / 低，高优先级为 “影响核心功能实现” 的任务）
任务执行与状态更新：
按子任务优先级顺序逐个实现，每完成 1 个任务后，立即使用update_tasks工具更新状态（状态选项：待执行 / 执行中 / 已完成 / 阻塞）
若执行中遇到阻塞（如现有代码无法复用、需求冲突），需在update_tasks中备注阻塞原因，并同步告知用户
代码复用与开发约束：
实现每个子任务前，先检索现有代码库（如调用代码检索工具或提示用户提供现有相似功能路径），确认是否存在可复用代码（如工具函数、组件、配置模板）
若复用现有代码，需在任务备注中记录复用路径及适配调整点；若无可复用代码，需备注 “无现有复用资源，需新建逻辑”
三、重要原则（不可违反）
代码复用优先：任何新功能实现前，必须先完成 “现有相似功能代码检索”，禁止在已有可复用资源的情况下重新开发相同逻辑，复用后需验证与现有系统的兼容性
任务管理强制：全程使用add_tasks（创建）和update_tasks（更新）工具跟踪进度，禁止无任务记录的 “直接开发”，任务列表需包含 “子任务 - 负责人（默认 Agent）- 截止预期 - 状态” 核心字段
渐进式实现：严格按子任务优先级执行，禁止跨优先级并行开发（如未完成 “核心逻辑实现” 子任务时，不启动 “UI 适配” 子任务），每完成 1 个子任务需同步用户验收
质量保证约束：新功能代码需满足以下要求：
与现有系统技术栈（如框架版本、编码规范）保持一致
新增逻辑需包含基础校验（如参数合法性判断、异常捕获）
完成后需提示用户 “新功能与现有系统兼容性验证点”（如需测试的接口、依赖模块）